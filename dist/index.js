module.exports=(()=>{"use strict";var e={182:(e,t,r)=>{r.r(t);const o=require("@actions/core");const n=require("aws-sdk");const a=require("axios");const{readFileSync:c}=require("fs");const s=o.getInput("appId");const i=o.getInput("branchName");const p=o.getInput("artifactPath");const l=o.getInput("region");var u=new n.Amplify({region:l});const d=e=>{return u.createDeployment(e).promise().catch(e=>{o.setFailed(e.stack);throw Error(e)})};const _=e=>{return u.startDeployment(e).promise().catch(e=>{o.setFailed(e.stack);throw Error(e)})};const b=(e,t)=>{const{zipUploadUrl:r}=e;console.log(e);const o=c(t);return a.put(r,o,{maxContentLength:Infinity,maxBodyLength:Infinity,headers:{"Content-Type":"application/zip"}}).then(({data:e})=>{console.log(e)})};let h;d({appId:s,branchName:i}).then(e=>{h=e;return e}).then(e=>b(e,p)).then(()=>{const{jobId:e}=h;return _({appId:s,branchName:i,jobId:e})}).then(e=>{o.setOutput("jobId",e.jobId);console.log(e)}).catch(e=>{const{jobId:t}=h;if(t){console.log(`Error detected, stopping amplify job ${t}`);var r={appId:s,branchName:i,jobId:t};u.stopJob(r,(e,t)=>{console.log(t)})}o.setFailed(e.stack);throw Error(e)})}};var t={};function __nccwpck_require__(r){if(t[r]){return t[r].exports}var o=t[r]={exports:{}};var n=true;try{e[r](o,o.exports,__nccwpck_require__);n=false}finally{if(n)delete t[r]}return o.exports}(()=>{__nccwpck_require__.r=(e=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})})})();__nccwpck_require__.ab=__dirname+"/";return __nccwpck_require__(182)})();